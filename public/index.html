<!DOCTYPE html>
<html>
<head>
    <title>Task Manager</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>

    <section id="app">

        <div id="new-category-wrapper">
            <input type="text" v-model="newCategory" v-on:keyup.enter="createCategory" id="new-category-input" placeholder="New category" />
        </div>

        <ul id="category-list">
            <li v-for="(cat, index) in categories" class="category-list-item">

                <div class="delete-icon category-delete-icon" v-on:click="showModal(index, 'category-delete')">X</div>
                
                <div class="category-name-wrapper">

                    <div v-if="editCatNameCheck(index)">
                        <input class="category-name-edit-input" type="text" placeholder="Edit name" v-bind:value="cat.name" v-model="cat.name" v-on:keyup.enter="editCategoryName()" />
                    </div>

                    <div v-else>
                        <div class="category-name" v-on:click="setEditState([index])">{{ cat.name }}</div>
                    </div>    
                </div>

                <div class="clear"></div>

                <ul class="task-list">

                    <li class="task-list-item task-new">
                        <p v-on:click="showTaskInput(index)">Add task..</p>
                    </li>

                    <li class="task-list-item">
                        <input type="text" v-bind:id="index + '-task-input'" v-on:keyup.enter="createTask(index)" placeholder="new task..." class="new-task-input" />
                    </li>

                    <li v-for="(task, taskIndex) in cat.tasks" class="task-list-item">

                        <div class="complete-icon-wrapper">
                            <label for="complete-icon" v-on:click="toggleCompletion(taskIndex, index, task.complete)">
                                <span class="complete-icon-label" v-bind:class="{'task-complete-icon-label': task.complete}"></span>
                            </label>
                            
                            <input type="checkbox" name="complete-icon" class="complete-icon" />
                        </div>

                        <div class="delete-icon task-delete-icon" v-on:click="showModal(taskIndex, 'task-delete', index)">X</div>
                        
                        <p v-bind:class="{'task-complete': task.complete}">
                            {{ task.text }}
                        </p>

                        <div class="clear"></div>
                    </li>
                </ul>
            </li>
        </ul>

        <!-- Modal component -->
        <zaffri-modal v-bind:data="modalConfig" v-on:hide_modal_emit="modalCallback"></zaffri-modal>
    </section>

    <script src="./js/bundle.js"></script>
</body>
</html>